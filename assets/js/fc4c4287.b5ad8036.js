"use strict";(self.webpackChunkunpackerrdox=self.webpackChunkunpackerrdox||[]).push([[412],{1536:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});var d=r(4848),s=r(8453);const o={},t=void 0,l={id:"install/generated/cmdhook",title:"cmdhook",description:"Command Hooks",source:"@site/docs/install/generated/cmdhook.md",sourceDirName:"install/generated",slug:"/install/generated/cmdhook",permalink:"/docs/install/generated/cmdhook",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},i={},a=[{value:"Command Hooks",id:"command-hooks",level:2}];function c(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"command-hooks",children:"Command Hooks"}),"\n",(0,d.jsxs)(r,{children:[(0,d.jsxs)("summary",{children:["Examples. Prefix: ",(0,d.jsx)("b",{children:"UN_CMDHOOK_"}),", Header: ",(0,d.jsx)("b",{children:"[[cmdhook]]"})]}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Using the config file:"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'#####################\n### Command Hooks ###\n#####################\n# Executes a script or command when an extraction queues, starts, finishes, and/or is deleted.\n# All data is passed in as environment variables. Try /usr/bin/env to see what variables are available.\n###### Don\'t forget to uncomment [[cmdhook]] at a minimum !!!!\n[[cmdhook]]\ncommand = \'/downloads/scripts/command.sh\'\n## Provide an optional name to hide the URL in logs.\n## If a name is not provided the first word in the command is used.\nname = ""\n## Runs the command inside /bin/sh (\'nix) or cmd.exe (Windows).\nshell = false\n## Do not log command\'s output.\nsilent = false\n## List of event ids to run command for, [0] for all.\n## The default is [0] and this is an example:\nevents = [1, 4, 7]\n## ===> Optional Command Hook Configuration <===\n## List of apps to exclude. None by default. This is an example:\nexclude = ["readarr", "lidarr"]\n## You can adjust how long to wait for the command to run.\ntimeout = "10s"\n'})}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Using environment variables:"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-js",children:"## Command Hooks\nUN_CMDHOOK_0_COMMAND=/downloads/scripts/command.sh\nUN_CMDHOOK_0_NAME=\nUN_CMDHOOK_0_SHELL=false\nUN_CMDHOOK_0_SILENT=false\nUN_CMDHOOK_0_EVENTS_0=1\nUN_CMDHOOK_0_EVENTS_1=4\nUN_CMDHOOK_0_EVENTS_2=7\nUN_CMDHOOK_0_EXCLUDE_0=readarr\nUN_CMDHOOK_0_EXCLUDE_1=lidarr\nUN_CMDHOOK_0_TIMEOUT=10s\n"})})]}),"\n",(0,d.jsxs)(n.p,{children:["Unpackerr can execute commands (or scripts) before and after an archive extraction.\nThe only thing required is a command. Name is optional, and used in logs only.\nSetting ",(0,d.jsx)(n.code,{children:"shell"})," to ",(0,d.jsx)(n.code,{children:"true"})," executes your command after ",(0,d.jsx)(n.code,{children:"/bin/sh -c"})," or ",(0,d.jsx)(n.code,{children:"cmd.exe /c"}),"\non Windows."]}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Config Name"}),(0,d.jsx)(n.th,{children:"Variable Name"}),(0,d.jsx)(n.th,{children:"Default / Note"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"command"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_COMMAND"})}),(0,d.jsx)(n.td,{children:"No Default / Command to run."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"name"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_NAME"})}),(0,d.jsx)(n.td,{children:"No Default / Name for logs, otherwise uses first word in command."})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"shell"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_SHELL"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"false"})," / Run command inside a shell."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"silent"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_SILENT"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"false"})," / Hide command output from logs."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"events"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_EVENTS_0"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"[0]"})," / List of event ids to run command for, ",(0,d.jsx)(n.code,{children:"0"})," for all."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"exclude"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_EXCLUDE_0"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"[]"})," / List of apps to exclude: radarr, sonarr, folders, etc."]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"timeout"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"UN_CMDHOOK_TIMEOUT"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:'"10s"'})," / How long to wait for the command to run."]})]})]})]}),"\n",(0,d.jsxs)(n.p,{children:["All extraction data is input to the command using environment variables, see example below.\nExtracted files variables names begin with ",(0,d.jsx)(n.code,{children:"UN_DATA_FILES_"}),".\nTry ",(0,d.jsx)(n.code,{children:"/usr/bin/env"})," as an example command to see what variables are available."]}),"\n",(0,d.jsxs)(r,{children:[(0,d.jsx)("summary",{children:"Example Output Variables"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-none",children:"UN_DATA_OUTPUT=folder/subfolder_unpackerred\nUN_PATH=folder/subfolder\nUN_DATA_START=2021-10-04T23:04:27.849216-07:00\nUN_REVISION=\nUN_EVENT=extracted\nUN_GO=go1.17\nUN_DATA_ARCHIVES=folder/subfolder_unpackerred/Funjetting.rar,folder/subfolder_unpackerred/Funjetting.r00,folder/subfolder/files.zip\nUN_DATA_ARCHIVE_2=folder/subfolder/files.zip\nUN_DATA_ARCHIVE_1=folder/subfolder_unpackerred/Funjetting.r00\nUN_DATA_ARCHIVE_0=folder/subfolder_unpackerred/Funjetting.rar\nUN_DATA_FILES=folder/subfolder/Funjetting.mp3,folder/subfolder/Funjetting.r00,folder/subfolder/Funjetting.rar,folder/subfolder/_unpackerred.subfolder.txt\nUN_DATA_FILE_1=folder/subfolder/Funjetting.r00\nUN_DATA_BYTES=2407624\nPWD=/Users/david/go/src/github.com/Unpackerr/unpackerr\nUN_DATA_FILE_0=folder/subfolder/Funjetting.mp3\nUN_OS=darwin\nUN_DATA_FILE_3=folder/subfolder/_unpackerred.subfolder.txt\nUN_DATA_FILE_2=folder/subfolder/Funjetting.rar\nUN_BRANCH=\nUN_TIME=2021-10-04T23:04:27.869613-07:00\nUN_VERSION=\nUN_DATA_QUEUE=0\nSHLVL=1\nUN_APP=Folder\nUN_STARTED=2021-10-04T23:03:22.849253-07:00\nUN_ARCH=amd64\nUN_DATA_ELAPSED=20.365752ms\nUN_DATA_ERROR=\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var d=r(6540);const s={},o=d.createContext(s);function t(e){const n=d.useContext(o);return d.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),d.createElement(o.Provider,{value:n},e.children)}}}]);