"use strict";(self.webpackChunkunpackerrdox=self.webpackChunkunpackerrdox||[]).push([[64],{9046:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var r=s(4848),n=s(8453);const i={},l=void 0,d={id:"install/generated/webserver",title:"webserver",description:"Web Server",source:"@site/docs/install/generated/webserver.md",sourceDirName:"install/generated",slug:"/install/generated/webserver",permalink:"/docs/install/generated/webserver",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},o={},c=[{value:"Web Server",id:"web-server",level:2}];function a(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components},{Details:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"web-server",children:"Web Server"}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsxs)("summary",{children:["Examples. Prefix: ",(0,r.jsx)("b",{children:"UN_WEBSERVER_"}),", Header: ",(0,r.jsx)("b",{children:"[webserver]"})]}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Using the config file:"}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:'[webserver]\n## The web server currently only supports metrics; set this to true if you wish to use it.\nmetrics = false\n## This may be set to a port or an ip:port to bind a specific IP. 0.0.0.0 binds ALL IPs.\nlisten_addr = "0.0.0.0:5656"\n## Recommend setting a log file for HTTP requests. Otherwise, they go with other logs.\nlog_file = \'\'\n## This app automatically rotates logs. Set these to the size and number to keep.\nlog_files = 10\nlog_file_mb = 10\n## Set both of these to valid file paths to enable HTTPS/TLS.\nssl_cert_file = \'\'\nssl_key_file = \'\'\n## Base URL from which to serve content.\nurlbase = "/"\n## Upstreams should be set to the IP or CIDR of your trusted upstream proxy.\n## Setting this correctly allows X-Forwarded-For to be used in logs.\n## In the future it may control auth proxy trust. Must be a list of strings.\n## example: upstreams = [ "127.0.0.1/32", "10.1.2.0/24" ]\nupstreams = []\n'})}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Using environment variables:"}),"\n"]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"## Web Server\nUN_WEBSERVER_METRICS=false\nUN_WEBSERVER_LISTEN_ADDR=0.0.0.0:5656\nUN_WEBSERVER_LOG_FILE=\nUN_WEBSERVER_LOG_FILES=10\nUN_WEBSERVER_LOG_FILE_MB=10\nUN_WEBSERVER_SSL_CERT_FILE=\nUN_WEBSERVER_SSL_KEY_FILE=\nUN_WEBSERVER_URLBASE=/\nUN_WEBSERVER_UPSTREAMS=\n"})})]}),"\n",(0,r.jsx)(t.admonition,{title:"Metrics",type:"note",children:(0,r.jsxs)(t.p,{children:["The web server currently only provides prometheus metrics, which you can display in\n",(0,r.jsx)(t.a,{href:"https://grafana.com/grafana/dashboards/18817-unpackerr/",children:"Grafana"}),".\nIt provides no UI. This may change in the future. The web server was added in v0.12.0."]})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Config Name"}),(0,r.jsx)(t.th,{children:"Variable Name"}),(0,r.jsx)(t.th,{children:"Default / Note"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"metrics"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_METRICS"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"false"})," / Extracted folders are written with this mode"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"listen_addr"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_LISTEN_ADDR"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:'"0.0.0.0:5656"'})," / ip",":port"," to listen on; ",(0,r.jsx)(t.code,{children:"0.0.0.0"})," is all IPs."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"log_file"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_LOG_FILE"})}),(0,r.jsx)(t.td,{children:"No Default / Provide optional file path to write HTTP logs."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"log_files"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_LOG_FILES"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"10"})," / Log files to keep after rotating. ",(0,r.jsx)(t.code,{children:"0"})," to disable."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"log_file_mb"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_LOG_FILE_MB"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"10"})," / Max size of HTTP log files in megabytes"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ssl_cert_file"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_SSL_CERT_FILE"})}),(0,r.jsx)(t.td,{children:"No Default / Path to SSL cert file to serve HTTPS."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ssl_key_file"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_SSL_KEY_FILE"})}),(0,r.jsx)(t.td,{children:"No Default / Path to SSL key file to serve HTTPS."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"urlbase"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_URLBASE"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:'"/"'})," / Base URL path to serve HTTP content."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"upstreams"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"UN_WEBSERVER_UPSTREAMS"})}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.code,{children:"[]"})," / List of upstream proxy CIDRs or IPs to trust."]})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>l,x:()=>d});var r=s(6540);const n={},i=r.createContext(n);function l(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);