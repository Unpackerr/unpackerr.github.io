"use strict";(self.webpackChunkunpackerrdox=self.webpackChunkunpackerrdox||[]).push([[958],{6861:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var o=r(4848),i=r(8453);const t={id:"docker",title:"Docker Basics",pagination_prev:"install/choosemethod",pagination_next:"install/configuration",description:"Install Unpackerr using Docker!"},s="Docker Installation",a={id:"install/docker",title:"Docker Basics",description:"Install Unpackerr using Docker!",source:"@site/docs/install/docker.md",sourceDirName:"install",slug:"/install/docker",permalink:"/docs/install/docker",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"docker",title:"Docker Basics",pagination_prev:"install/choosemethod",pagination_next:"install/configuration",description:"Install Unpackerr using Docker!"},sidebar:"someSidebar",previous:{title:"Choose Install Method",permalink:"/docs/install/choosemethod"},next:{title:"Application Configuration",permalink:"/docs/install/configuration"}},c={},l=[{value:"Docker Example",id:"docker-example",level:2},{value:"Example with config file",id:"example-with-config-file",level:2},{value:"More Dockers",id:"more-dockers",level:2},{value:"Permissions",id:"permissions",level:2},{value:"Hotio",id:"hotio",level:3},{value:"Folder Watcher",id:"folder-watcher",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"docker-installation",children:"Docker Installation"}),"\n",(0,o.jsxs)(n.p,{children:["This project builds automatically in ",(0,o.jsx)(n.a,{href:"https://hub.docker.com/r/golift/unpackerr",children:"Docker Cloud"})," and creates\n",(0,o.jsx)(n.a,{href:"https://hub.docker.com/r/golift/unpackerr/tags",children:"ready-to-use multi-architecture images"})," images.\nThe ",(0,o.jsx)(n.code,{children:"latest"})," tag is always a ",(0,o.jsx)(n.a,{href:"https://github.com/Unpackerr/unpackerr/releases",children:"tagged release on GitHub"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"docker-example",children:"Docker Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:'docker pull golift/unpackerr\ndocker run -d -v /mnt/HostDownloads:/downloads \\\n  -e "UN_SONARR_0_URL=http://localhost:8989" \\\n  -e "UN_SONARR_0_API_KEY=kjsdkasjdaksdj" golift/unpackerr\ndocker logs <container id from docker run>\n'})}),"\n",(0,o.jsxs)(n.admonition,{title:"Data Mount",type:"warning",children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"/data"})," or ",(0,o.jsx)(n.code,{children:"/downloads"})," mount you use for Starr apps should be set the same for Unpackerr.\nUsing the same mount path keeps consistency and makes troubleshooting Unpackerr easier.\nMost importantly, it allows Unpackerr to find your files."]}),(0,o.jsxs)(n.p,{children:["This means that if you mount ",(0,o.jsx)(n.code,{children:"/mnt/storage/downloads:/downloads"})," on your Starr apps you should\nalso mount ",(0,o.jsx)(n.code,{children:"/mnt/storage/downloads:/downloads"})," on your Unpackerr container. If you mount\n",(0,o.jsx)(n.code,{children:"/mnt/user/data:/data"})," on your Starr apps, mount the same path on Unpackerr.\n",(0,o.jsx)(n.strong,{children:"Make sure Unpackerr can find the downloads in the same place that Sonarr and Radarr find them."})]})]}),"\n",(0,o.jsx)(n.h2,{id:"example-with-config-file",children:"Example with config file"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy the ",(0,o.jsx)(n.a,{href:"https://github.com/Unpackerr/unpackerr/blob/main/examples/unpackerr.conf.example",children:"example config file"}),"\nfrom the repo, or ",(0,o.jsx)(n.a,{href:"https://notifiarr.com/unpackerr.php",children:"generate one"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Then grab the image from docker hub and run it using an overlay for the config file's directory."}),"\n",(0,o.jsxs)(n.li,{children:["The config file must be at ",(0,o.jsx)(n.code,{children:"/config/unpackerr.conf"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Recommend bind-mounting ",(0,o.jsx)(n.code,{children:"/config"})," as an app-data directory. Example Follows."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker pull golift/unpackerr\ndocker run -d -v /mnt/HostDownloads:/downloads -v /folder/with/config/file:/config golift/unpackerr\ndocker logs <container id from docker run>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"more-dockers",children:"More Dockers"}),"\n",(0,o.jsxs)(n.p,{children:["If you want a container that has a bit more to it, you can try a third party option.\nThe container provided by golift is built ",(0,o.jsx)(n.code,{children:"FROM scratch"})," so it has nothing more in the\ncontainer than a binary and a config file (with our defaults)."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsxs)(n.strong,{children:[(0,o.jsx)(n.a,{href:"https://github.com/hotio",children:"@hotio"})," maintains a\n",(0,o.jsx)(n.a,{href:"https://hub.docker.com/r/hotio/unpackerr",children:"Custom Docker Container"}),"\nfor Unpackerr."]})," (",(0,o.jsx)(n.a,{href:"https://github.com/hotio/unpackerr",children:"repo"}),")"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"permissions",children:"Permissions"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"golift"})," docker container runs as uid 0 (root) by default. This is probably not what you want.\nMake sure to set the correct uid and gid with the ",(0,o.jsx)(n.code,{children:"--user"})," parameter. Example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# This commands runs golift/unpackerr with UID 1000 and GID 100.\ndocker run --user 1000:100 -d -v /mnt/data:/data -v /mnt/config:/config golift/unpackerr\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["Replace 1000:100 with the correct uid",":gid"," for your environment."]}),"\nOne of them must provide write access to your archives."]}),"\n",(0,o.jsxs)(n.p,{children:["When using compose, add ",(0,o.jsx)(n.code,{children:"user: 1000:100"})," to the service definition.\nFind examples in the ",(0,o.jsx)(n.a,{href:"compose",children:"Docker Compose instruction"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"hotio",children:"Hotio"}),"\n",(0,o.jsxs)(n.p,{children:["The primary difference between the golift and hotio containers is how you set the uid and gid.\nHotio does not user the ",(0,o.jsx)(n.code,{children:"--user"})," parameter and instead sets the UID and GID with environment\nvariables. ",(0,o.jsxs)(n.em,{children:["Passing the ",(0,o.jsx)(n.code,{children:"--user"})," parameter to the hotio container will render it inoperable."]}),"\nPass the ",(0,o.jsx)(n.code,{children:"PUID"})," and ",(0,o.jsx)(n.code,{children:"PGID"})," environment variables when using hotio's container. Example:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# This commands runs hotio/unpackerr with UID 1000 and GID 100.\ndocker run -e PUID=1000 -e PGID=100 -d -v /mnt/data:/data -v /mnt/config:/config hotio/unpackerr\n"})}),"\n",(0,o.jsx)(n.h2,{id:"folder-watcher",children:"Folder Watcher"}),"\n",(0,o.jsxs)(n.p,{children:["Watching folders in Docker will cause Unpackerr to constantly poll the\nwatched-folder for changes at a default rate of ",(0,o.jsx)(n.code,{children:"1s"})," (1 second)."]}),"\n",(0,o.jsxs)(n.p,{children:["The Folder Watch feature uses ",(0,o.jsx)(n.code,{children:"inotify"})," (a.k.a. ",(0,o.jsx)(n.code,{children:"fsnotify"}),") to identify\nchanges to the watched folder. A folder-poller is automatically started when\nrun in Docker because ",(0,o.jsx)(n.code,{children:"inotify"})," is unreliable. Disable the folder poller\n(and rely on ",(0,o.jsx)(n.code,{children:"inotify"})," only) by setting ",(0,o.jsx)(n.code,{children:"folders.interval"})," to ",(0,o.jsx)(n.code,{children:"1ms"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["If Unpackerr has trouble determining when downloads are finished, set\n",(0,o.jsx)(n.code,{children:"start_delay"})," high enough to avoid beginning extracting files that are\nstill being transferred."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Alternatively, run Unpackerr as a native service instead of in Docker."})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var o=r(6540);const i={},t=o.createContext(i);function s(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);